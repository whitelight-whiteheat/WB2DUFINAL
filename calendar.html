<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="2DU - Calendar view for your tasks">
    <title>2DU - Calendar</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/images.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <aside class="sidebar">
        <div class="logo">
            <a href="index.html" class="logo-link">
                <h1>2DU</h1>
            </a>
        </div>
        <nav class="sidebar-nav">
            <ul class="nav-list">
                <li>
                    <a href="index.html" class="nav-link">
                        <i class="fa-solid fa-house nav-icon"></i>
                        Home
                    </a>
                </li>
                <li>
                    <a href="tasks.html" class="nav-link">
                        <i class="fa-solid fa-tasks nav-icon"></i>
                        Tasks
                    </a>
                </li>
                <li>
                    <a href="calendar.html" class="nav-link active">
                        <i class="fa-solid fa-calendar nav-icon"></i>
                        Calendar
                    </a>
                </li>
                <li>
                    <a href="tags.html" class="nav-link">
                        <i class="fa-solid fa-tags nav-icon"></i>
                        Tags
                    </a>
                </li>
                <li>
                    <a href="form.html" class="nav-link">
                        <i class="fa-solid fa-comments nav-icon"></i>
                        Contact
                    </a>
                </li>
                <li>
                    <a href="table.html" class="nav-link">
                        <i class="fa-solid fa-chart-bar nav-icon"></i>
                        Statistics
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <div class="main-content">
        <header>
            <div class="container">
                <button class="menu-toggle" aria-label="Toggle Menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </header>

        <main class="container">
            <section class="calendar-overview">
                <h2>Calendar View</h2>
                <p>Our calendar view provides a comprehensive overview of your schedule and deadlines. Visualize your tasks, meetings, and important events in a clear, intuitive format. The calendar integrates seamlessly with your task list, allowing you to drag and drop tasks to different dates, set recurring events, and maintain a balanced schedule. Color-coded events and priority indicators help you quickly identify important commitments and manage your time effectively.</p>

                <div class="calendar-image">
                    <img src="images/itd3.avif" alt="Digital calendar and scheduling interface" class="responsive-image">
                </div>

                <div class="calendar-controls">
                    <button id="prevMonth">Previous</button>
                    <h3 id="currentMonth">May 2025</h3>
                    <button id="nextMonth">Next</button>
                </div>

                <div class="calendar-grid">
                    <div class="calendar-header">
                        <div>Sun</div>
                        <div>Mon</div>
                        <div>Tue</div>
                        <div>Wed</div>
                        <div>Thu</div>
                        <div>Fri</div>
                        <div>Sat</div>
                    </div>
                    <div class="calendar-body" id="calendarBody">
                        <!-- Calendar days will be populated by JavaScript -->
                    </div>
                </div>

                <div class="calendar-legend">
                    <h3>Priority Indicators</h3>
                    <ul>
                        <li><span class="legend-dot priority-high"></span> High Priority - Requires immediate attention</li>
                        <li><span class="legend-dot priority-medium"></span> Medium Priority - Important but flexible</li>
                        <li><span class="legend-dot priority-low"></span> Low Priority - Can be scheduled as time permits</li>
                    </ul>
                </div>
            </section>

            <section class="upcoming-events">
                <h3>Upcoming Events</h3>
                <div class="event-list">
                    <article class="event-item">
                        <div class="event-date">
                            <span class="event-day">15</span>
                            <span class="event-month">May</span>
                        </div>
                        <div class="event-details">
                            <h4>Project Deadline</h4>
                            <p>Complete and submit project documentation for client review. Ensure all deliverables are properly formatted and include necessary supporting materials.</p>
                            <span class="event-time">All Day</span>
                        </div>
                    </article>

                    <article class="event-item">
                        <div class="event-date">
                            <span class="event-day">20</span>
                            <span class="event-month">May</span>
                        </div>
                        <div class="event-details">
                            <h4>Team Meeting</h4>
                            <p>Weekly progress review and planning session. Prepare status updates for current projects and discuss upcoming initiatives.</p>
                            <span class="event-time">10:00 AM - 11:30 AM</span>
                        </div>
                    </article>
                </div>
            </section>

            <section class="calendar-tips">
                <h3>Calendar Management Best Practices</h3>
                <div class="tips-image">
                    <img src="images/itd4.avif" alt="Time management and productivity tools" class="responsive-image">
                </div>
                <ul>
                    <li><strong>Regular Review:</strong> Set aside time each week to review and update your calendar. This helps prevent scheduling conflicts and ensures you're prepared for upcoming commitments.</li>
                    <li><strong>Color Coding:</strong> Use our color-coding system to quickly identify different types of events and tasks. This visual organization makes it easier to scan your schedule.</li>
                    <li><strong>Buffer Time:</strong> Include buffer time between meetings and tasks to account for overruns and provide breathing room in your schedule.</li>
                    <li><strong>Recurring Events:</strong> Set up recurring events for regular meetings and tasks to save time and ensure consistency.</li>
                    <li><strong>Priority Planning:</strong> Schedule high-priority tasks during your most productive hours to maximize efficiency.</li>
                </ul>
            </section>
        </main>

        <footer>
            <div class="container footer-content">
                <div class="footer-info">
                    <p>&copy; 2025 Task Manager. All rights reserved.</p>
                    <p>Contact us: <a href="mailto:contact@2DU.com">contact@2DU.com</a></p>
                </div>
                <div class="footer-links">
                    <a href="https://www.example.com" target="_blank">External Resources</a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Menu toggle
        document.querySelector('.menu-toggle').addEventListener('click', function() {
            document.querySelector('.sidebar').classList.toggle('active');
        });

        // Calendar functionality
        let currentDate = new Date();

        function getColorClass(color) {
            // Handle undefined or null color
            if (!color) {
                return 'default-tag';
            }
            // Convert color to a valid CSS class name
            return color.toLowerCase().replace(/\s+/g, '-');
        }

        function generateCalendar() {
            const currentMonth = currentDate.getMonth();
            const currentYear = currentDate.getFullYear();
            
            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            
            const startingDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 
                              'July', 'August', 'September', 'October', 'November', 'December'];
            
            document.getElementById('currentMonth').textContent = `${monthNames[currentMonth]} ${currentYear}`;
            
            const calendarBody = document.getElementById('calendarBody');
            calendarBody.innerHTML = '';
            
            // Previous month's days
            const prevMonthLastDay = new Date(currentYear, currentMonth, 0).getDate();
            for (let i = startingDay - 1; i >= 0; i--) {
                const day = document.createElement('div');
                day.className = 'calendar-day faded';
                day.innerHTML = `<div class="day-number">${prevMonthLastDay - i}</div>`;
                calendarBody.appendChild(day);
            }
            
            // Current month's days
            const today = new Date();
            for (let i = 1; i <= totalDays; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day';
                if (i === today.getDate() && 
                    currentMonth === today.getMonth() && 
                    currentYear === today.getFullYear()) {
                    day.classList.add('today');
                }
                day.innerHTML = `<div class="day-number">${i}</div>`;

                // Add tasks to the day
                const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
                const currentDate = new Date(currentYear, currentMonth, i);
                const dayTasks = tasks.filter(task => {
                    if (!task.dueDate) {
                        // If no due date, show on today
                        return currentDate.toDateString() === today.toDateString();
                    }
                    const taskDate = new Date(task.dueDate);
                    return taskDate.toDateString() === currentDate.toDateString();
                });

                if (dayTasks.length > 0) {
                    const taskList = document.createElement('div');
                    taskList.className = 'day-tasks';
                    
                    // Sort tasks by priority (high first)
                    const sortedTasks = dayTasks.sort((a, b) => {
                        const priorityOrder = { high: 0, medium: 1, low: 2 };
                        return priorityOrder[a.priority] - priorityOrder[b.priority];
                    });

                    // Limit to 3 tasks per day to prevent overflow
                    const displayTasks = sortedTasks.slice(0, 3);
                    
                    displayTasks.forEach(task => {
                        const taskElement = document.createElement('div');
                        taskElement.className = `calendar-task ${task.priority}`;
                        taskElement.innerHTML = `
                            <span class="task-text">${task.text}</span>
                            ${task.tag ? `<span class="task-tag ${getColorClass(task.tag.color)}">${task.tag}</span>` : ''}
                        `;
                        taskList.appendChild(taskElement);
                    });

                    // Add indicator if there are more tasks
                    if (dayTasks.length > 3) {
                        const moreTasks = document.createElement('div');
                        moreTasks.className = 'more-tasks';
                        moreTasks.textContent = `+${dayTasks.length - 3} more`;
                        taskList.appendChild(moreTasks);
                    }

                    day.appendChild(taskList);
                }

                calendarBody.appendChild(day);
            }
            
            // Next month's days to fill the grid
            const totalCells = 42; // 6 rows × 7 columns
            const remainingCells = totalCells - (startingDay + totalDays);
            for (let i = 1; i <= remainingCells; i++) {
                const day = document.createElement('div');
                day.className = 'calendar-day faded';
                day.innerHTML = `<div class="day-number">${i}</div>`;
                calendarBody.appendChild(day);
            }
        }

        // Update upcoming events section with actual tasks
        function updateUpcomingEvents() {
            const tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
            const eventList = document.querySelector('.event-list');
            eventList.innerHTML = '';

            // Sort tasks by due date
            const sortedTasks = tasks
                .filter(task => !task.completed)
                .sort((a, b) => {
                    const dateA = a.dueDate ? new Date(a.dueDate) : new Date();
                    const dateB = b.dueDate ? new Date(b.dueDate) : new Date();
                    return dateA - dateB;
                });

            sortedTasks.slice(0, 5).forEach(task => {
                const dueDate = task.dueDate ? new Date(task.dueDate) : new Date();
                const eventItem = document.createElement('article');
                eventItem.className = 'event-item';
                
                eventItem.innerHTML = `
                    <div class="event-date">
                        <span class="event-day">${dueDate.getDate()}</span>
                        <span class="event-month">${dueDate.toLocaleString('default', { month: 'short' })}</span>
                    </div>
                    <div class="event-details">
                        <h4>${task.text}</h4>
                        <p>${task.tag ? `Tag: ${task.tag}` : 'No tag'}</p>
                        <span class="event-time ${task.priority}">${task.priority} Priority</span>
                    </div>
                `;

                eventList.appendChild(eventItem);
            });
        }

        // Initialize calendar and events
        generateCalendar();
        updateUpcomingEvents();

        // Update when tasks change
        window.addEventListener('storage', function(e) {
            if (e.key === 'tasks') {
                generateCalendar();
                updateUpcomingEvents();
            }
        });

        // Month navigation
        document.getElementById('prevMonth').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() - 1);
            generateCalendar();
        });

        document.getElementById('nextMonth').addEventListener('click', function() {
            currentDate.setMonth(currentDate.getMonth() + 1);
            generateCalendar();
        });
    </script>
</body>
</html> 